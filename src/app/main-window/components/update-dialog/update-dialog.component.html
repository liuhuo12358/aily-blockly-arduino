<div class="prompt-box bborder">
  <div class="header">
    <div class="title">{{title}}</div>
    <div class="win-btns">
      <div class="btn ccenter close" (click)="close('')">
        <i class="fa-light fa-xmark"></i>
      </div>
    </div>
  </div>
  <div class="content">
    @if(mode === 'available'){
    <div class="text" [innerHTML]="text"></div>
    }
    <!-- 进度条 - 仅在下载时显示 -->
    @if(mode === 'downloading' || mode === 'downloaded'){
    <div class="progress-container">
      <nz-progress [nzPercent]="progress" [nzShowInfo]="true"
        [nzStatus]="progress==100?'success':'active'"></nz-progress>
    </div>
    }

    @if (mode === 'error') {
    <div class="error-container">
      <i nz-icon nzType="close-circle" nzTheme="fill" style="color: #f5222d;"></i>
      <span>{{ 'UPDATE_DIALOG.DOWNLOAD_FAILED' | translate }}</span>
    </div>
    }

    <div class="footer">
      <!-- 可用更新状态的按钮 -->
      @switch (mode) {
      @case ("available") {
      <button nz-button nzType="default" (click)="close()" [nzSize]="'small'">{{ 'UPDATE_DIALOG.REMIND_LATER' | translate }}</button>
      <button nz-button nzType="default" (click)="close('skip')" nzDanger [nzSize]="'small'">{{ 'UPDATE_DIALOG.SKIP_VERSION' | translate }}</button>
      <button nz-button nzType="primary" (click)="download()" [nzSize]="'small'">{{ 'UPDATE_DIALOG.UPDATE_NOW' | translate }}</button>
      }
      @case ("downloading") {
      <button nz-button nzType="default" (click)="close('download_stop')" nzDanger [nzSize]="'small'">{{ 'UPDATE_DIALOG.CANCEL_DOWNLOAD' | translate }}</button>
      }
      @case ("downloaded") {
      <button nz-button nzType="default" (click)="close()" [nzSize]="'small'">{{ 'UPDATE_DIALOG.INSTALL_LATER' | translate }}</button>
      <button nz-button nzType="primary" (click)="close('install')" [nzSize]="'small'">{{ 'UPDATE_DIALOG.INSTALL_NOW' | translate }}</button>
      }
      @case ("error") {
      <button nz-button nzType="default" (click)="close('')" [nzSize]="'small'">{{ 'UPDATE_DIALOG.CLOSE' | translate }}</button>
      <button nz-button nzType="primary" (click)="download()" [nzSize]="'small'">{{ 'UPDATE_DIALOG.RETRY' | translate }}</button>
      }
      }
    </div>
  </div>
</div>